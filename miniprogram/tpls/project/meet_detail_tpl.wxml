<template name="meetDetailTpl">
	<view wx:if="{{isLoad===null}}" class="margin-top load notexist text-l load-project"></view>
	<view wx:if="{{isLoad===false}}" class="margin-top load loading text-l load-project"></view>

	<view wx:if="{{isLoad}}" class="main">

		<view class="top-area">
			<view class="top-title text-cut">{{meet.MEET_TITLE}}</view>
			<view class="top-menu">
				<view bindtap="bindShowMindTap" class="item {{showMind?'cur text-project':''}}"><text class="icon-friend margin-right-xxs"></text>{{skin.MEET_NAME}}须知</view>
				<view bindtap="bindShowTimeTap" class="item {{showTime?'cur text-project':''}}"><text class="icon-remind margin-right-xxs"></text>可预约时段</view>
			</view>
		</view>

		<view class="big-box">
			<block wx:if="{{showMind}}">
				<view class="article-box padding-project">
				 
					<view class="article card-project shadow-project margin-top" wx:if="{{meet.MEET_CONTENT && meet.MEET_CONTENT.length>0}}">
						<block wx:for="{{meet.MEET_CONTENT}}" wx:key="key">
							<view class="content" wx:if="{{item.type=='text'}}">
								<text user-select="{{true}}">{{item.val}}</text>
							</view>

							<view class="pics" wx:if="{{item.type=='img'}}">
								<image bindtap="url" data-type='img' data-url="{{item.val}}" show-menu-by-longpress="{{true}}" class="loading" mode='widthFix' lazy-load="true" src="{{item.val}}">
								</image>
							</view>
						</block>
					</view>
				</view>
			</block>

			<block wx:if="{{showTime}}">
				<view wx:if="{{!meet.MEET_DAYS_SET || meet.MEET_DAYS_SET.length == 0}}" class="meet-no-time text-grey">
					<text class="icon-emoji"></text>
					<view>暂无可预约时段，请选择其他</view>
				</view>

				<view wx:if="{{meet.MEET_DAYS_SET && meet.MEET_DAYS_SET.length > 0}}" class="new-layout-box">
					<scroll-view class="days-scroll" scroll-y scroll-with-animation style="height:calc(100vh - 293rpx)">
						<view class="day-container" wx:for="{{meet.MEET_DAYS_SET}}" wx:if="{{item.times.length>0||canNullTime}}" wx:key="key">
							<!-- 日期标题居中 -->
							<view class="centered-date-header">
								<view class="centered-date-title">{{item.dayDesc}}</view>
							</view>

							<!-- 横向滚动时间段 -->
							<view class="times-container">
								<view class="no-times-text text-grey" wx:if="{{item.times.length==0&&canNullTime}}">暂无可预约时段</view>

								<scroll-view wx:else class="times-horizontal-scroll" scroll-x scroll-with-animation show-scrollbar="{{false}}">
									<view class="times-horizontal-wrapper">
										<view class="time-card {{itm.error?'error':''}} {{itm.userJoined?'user-joined':''}}" 
											  bindtap="bindJoinTap" 
											  data-dayidx="{{index}}" 
											  data-timeidx="{{idx}}" 
											  wx:for="{{item.times}}" 
											  wx:key="key" 
											  wx:for-item="itm" 
											  wx:for-index="idx">
											<view class="time-display">{{itm.start}}～{{itm.end}}</view>
											<view class="status-display">
												<block wx:if="{{itm.userJoined}}">
													<text class="joined-status">✓ 已预约</text>
												</block>
												<block wx:elif="{{!itm.error}}">
													<text wx:if="{{meet.MEET_IS_SHOW_LIMIT==1&&itm.isLimit}}" class="limit-status">({{itm.stat.succCnt}}/{{itm.limit}})</text>
													<text wx:if="{{meet.MEET_IS_SHOW_LIMIT==1&&!itm.isLimit}}" class='limit-status'>(人数不限)</text>
													<text wx:if="{{meet.MEET_IS_SHOW_LIMIT==0}}" class='limit-status'>(可预约)</text>
												</block>
												<block wx:else>
													<text class="error-status">({{itm.error}})</text>
												</block>
											</view>
										</view>
									</view>
								</scroll-view>
							</view>
						</view>
					</scroll-view>
				</view>
			</block>
		</view>

	</view>

	<!-- top begin -->
	<button wx:if="{{topShow}}" class="btn-fixed bg-gray text-gray btn-top" bindtap="bindTopTap" style="bottom:60rpx"><text class="icon-top"></text></button>
	<!-- top END. -->

</template>